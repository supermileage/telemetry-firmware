<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.17"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>ucamToFileRK: SequentialFile Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">ucamToFileRK
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.17 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pub-static-methods">Static Public Member Functions</a> &#124;
<a href="#pro-methods">Protected Member Functions</a> &#124;
<a href="#pro-attribs">Protected Attributes</a>  </div>
  <div class="headertitle">
<div class="title">SequentialFile Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Class for maintaining a directory of files as a queue with unique filenames.  
 <a href="class_sequential_file.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="_sequential_file_r_k_8h_source.html">SequentialFileRK.h</a>&gt;</code></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:aef58d2fa4a6ef7c2bdb369199ba63db2"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_sequential_file.html#aef58d2fa4a6ef7c2bdb369199ba63db2">SequentialFile</a> ()</td></tr>
<tr class="memdesc:aef58d2fa4a6ef7c2bdb369199ba63db2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Default constructor.  <a href="class_sequential_file.html#aef58d2fa4a6ef7c2bdb369199ba63db2">More...</a><br /></td></tr>
<tr class="separator:aef58d2fa4a6ef7c2bdb369199ba63db2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a49b1e5ab96a07ee5ccdeadf90bad9606"><td class="memItemLeft" align="right" valign="top">virtual&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_sequential_file.html#a49b1e5ab96a07ee5ccdeadf90bad9606">~SequentialFile</a> ()</td></tr>
<tr class="memdesc:a49b1e5ab96a07ee5ccdeadf90bad9606"><td class="mdescLeft">&#160;</td><td class="mdescRight">Destructor.  <a href="class_sequential_file.html#a49b1e5ab96a07ee5ccdeadf90bad9606">More...</a><br /></td></tr>
<tr class="separator:a49b1e5ab96a07ee5ccdeadf90bad9606"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a78904483c9d5e57a108b950fc59e19b3"><td class="memItemLeft" align="right" valign="top"><a class="el" href="class_sequential_file.html">SequentialFile</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_sequential_file.html#a78904483c9d5e57a108b950fc59e19b3">withDirPath</a> (const char *<a class="el" href="class_sequential_file.html#aa3cd0dfa9f017575b7f3b6153be8a164">dirPath</a>)</td></tr>
<tr class="memdesc:a78904483c9d5e57a108b950fc59e19b3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sets the directory to use as the queue directory. This is required!  <a href="class_sequential_file.html#a78904483c9d5e57a108b950fc59e19b3">More...</a><br /></td></tr>
<tr class="separator:a78904483c9d5e57a108b950fc59e19b3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a31d347554fe824ba04172b428291457c"><td class="memItemLeft" align="right" valign="top">const char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_sequential_file.html#a31d347554fe824ba04172b428291457c">getDirPath</a> () const</td></tr>
<tr class="memdesc:a31d347554fe824ba04172b428291457c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Gets the directory path set using <a class="el" href="class_sequential_file.html#a78904483c9d5e57a108b950fc59e19b3" title="Sets the directory to use as the queue directory. This is required!">withDirPath()</a>  <a href="class_sequential_file.html#a31d347554fe824ba04172b428291457c">More...</a><br /></td></tr>
<tr class="separator:a31d347554fe824ba04172b428291457c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2d4901b560f696247adf9e482c4409f0"><td class="memItemLeft" align="right" valign="top"><a class="el" href="class_sequential_file.html">SequentialFile</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_sequential_file.html#a2d4901b560f696247adf9e482c4409f0">withPattern</a> (const char *<a class="el" href="class_sequential_file.html#aa293dc017d7717b5d5728e32317dc6d7">pattern</a>)</td></tr>
<tr class="memdesc:a2d4901b560f696247adf9e482c4409f0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sets the filename pattern. Default is %08d (8-digit decimal number with leading zeros)  <a href="class_sequential_file.html#a2d4901b560f696247adf9e482c4409f0">More...</a><br /></td></tr>
<tr class="separator:a2d4901b560f696247adf9e482c4409f0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1295358ac1806e9c320481589ae32b31"><td class="memItemLeft" align="right" valign="top"><a id="a1295358ac1806e9c320481589ae32b31"></a>
const char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_sequential_file.html#a1295358ac1806e9c320481589ae32b31">getPattern</a> () const</td></tr>
<tr class="memdesc:a1295358ac1806e9c320481589ae32b31"><td class="mdescLeft">&#160;</td><td class="mdescRight">Gets the filename pattern. <br /></td></tr>
<tr class="separator:a1295358ac1806e9c320481589ae32b31"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a73a5cf479e0fbd460362350289919d7a"><td class="memItemLeft" align="right" valign="top"><a class="el" href="class_sequential_file.html">SequentialFile</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_sequential_file.html#a73a5cf479e0fbd460362350289919d7a">withFilenameExtension</a> (const char *ext)</td></tr>
<tr class="memdesc:a73a5cf479e0fbd460362350289919d7a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Filename extension for queue files. (Default: no extension)  <a href="class_sequential_file.html#a73a5cf479e0fbd460362350289919d7a">More...</a><br /></td></tr>
<tr class="separator:a73a5cf479e0fbd460362350289919d7a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8f9d8ef1772bef6f2bf71dbf77669eec"><td class="memItemLeft" align="right" valign="top">const char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_sequential_file.html#a8f9d8ef1772bef6f2bf71dbf77669eec">getFilenameExtension</a> () const</td></tr>
<tr class="memdesc:a8f9d8ef1772bef6f2bf71dbf77669eec"><td class="mdescLeft">&#160;</td><td class="mdescRight">Gets the filename extension.  <a href="class_sequential_file.html#a8f9d8ef1772bef6f2bf71dbf77669eec">More...</a><br /></td></tr>
<tr class="separator:a8f9d8ef1772bef6f2bf71dbf77669eec"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8ec4eba0b7b735b9f338e21003daec81"><td class="memItemLeft" align="right" valign="top"><a id="a8ec4eba0b7b735b9f338e21003daec81"></a>
bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_sequential_file.html#a8ec4eba0b7b735b9f338e21003daec81">scanDir</a> (void)</td></tr>
<tr class="memdesc:a8ec4eba0b7b735b9f338e21003daec81"><td class="mdescLeft">&#160;</td><td class="mdescRight">Scans the queue directory for files. Typically called during setup(). <br /></td></tr>
<tr class="separator:a8ec4eba0b7b735b9f338e21003daec81"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3c08c208379127ef9913e4275c4dd032"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_sequential_file.html#a3c08c208379127ef9913e4275c4dd032">reserveFile</a> (void)</td></tr>
<tr class="memdesc:a3c08c208379127ef9913e4275c4dd032"><td class="mdescLeft">&#160;</td><td class="mdescRight">Reserve a file number you will use to write data to.  <a href="class_sequential_file.html#a3c08c208379127ef9913e4275c4dd032">More...</a><br /></td></tr>
<tr class="separator:a3c08c208379127ef9913e4275c4dd032"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad1f77c50657cd2364c85955ae6740313"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_sequential_file.html#ad1f77c50657cd2364c85955ae6740313">addFileToQueue</a> (int fileNum)</td></tr>
<tr class="memdesc:ad1f77c50657cd2364c85955ae6740313"><td class="mdescLeft">&#160;</td><td class="mdescRight">Adds a previously reserved file to the queue.  <a href="class_sequential_file.html#ad1f77c50657cd2364c85955ae6740313">More...</a><br /></td></tr>
<tr class="separator:ad1f77c50657cd2364c85955ae6740313"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5fb651889c0e74d6ec4a4afeb112658a"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_sequential_file.html#a5fb651889c0e74d6ec4a4afeb112658a">getFileFromQueue</a> (bool remove=true)</td></tr>
<tr class="memdesc:a5fb651889c0e74d6ec4a4afeb112658a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Gets a file from the queue.  <a href="class_sequential_file.html#a5fb651889c0e74d6ec4a4afeb112658a">More...</a><br /></td></tr>
<tr class="separator:a5fb651889c0e74d6ec4a4afeb112658a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a16f4e1bf3ca26ba7551b8148c72e3f27"><td class="memItemLeft" align="right" valign="top">String&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_sequential_file.html#a16f4e1bf3ca26ba7551b8148c72e3f27">getNameForFileNum</a> (int fileNum, const char *overrideExt=NULL)</td></tr>
<tr class="memdesc:a16f4e1bf3ca26ba7551b8148c72e3f27"><td class="mdescLeft">&#160;</td><td class="mdescRight">Uses pattern to create a filename given a fileNum.  <a href="class_sequential_file.html#a16f4e1bf3ca26ba7551b8148c72e3f27">More...</a><br /></td></tr>
<tr class="separator:a16f4e1bf3ca26ba7551b8148c72e3f27"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad446fe7c6c783f8eb902e0b1aab580ee"><td class="memItemLeft" align="right" valign="top">String&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_sequential_file.html#ad446fe7c6c783f8eb902e0b1aab580ee">getPathForFileNum</a> (int fileNum, const char *overrideExt=NULL)</td></tr>
<tr class="memdesc:ad446fe7c6c783f8eb902e0b1aab580ee"><td class="mdescLeft">&#160;</td><td class="mdescRight">Gets a full pathname based on dirName and getNameForFileNum.  <a href="class_sequential_file.html#ad446fe7c6c783f8eb902e0b1aab580ee">More...</a><br /></td></tr>
<tr class="separator:ad446fe7c6c783f8eb902e0b1aab580ee"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab598f45bbd35dda3af14be5a5be7671a"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_sequential_file.html#ab598f45bbd35dda3af14be5a5be7671a">removeFileNum</a> (int fileNum, bool allExtensions)</td></tr>
<tr class="memdesc:ab598f45bbd35dda3af14be5a5be7671a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Remove fileNum from the flash file system.  <a href="class_sequential_file.html#ab598f45bbd35dda3af14be5a5be7671a">More...</a><br /></td></tr>
<tr class="separator:ab598f45bbd35dda3af14be5a5be7671a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6628953887d8e3f20c485fe5b789c9d6"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_sequential_file.html#a6628953887d8e3f20c485fe5b789c9d6">removeAll</a> (bool removeDir)</td></tr>
<tr class="memdesc:a6628953887d8e3f20c485fe5b789c9d6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Removes all of the files in the queue directory.  <a href="class_sequential_file.html#a6628953887d8e3f20c485fe5b789c9d6">More...</a><br /></td></tr>
<tr class="separator:a6628953887d8e3f20c485fe5b789c9d6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab03533e1ce2267c04a5e586af2d36e17"><td class="memItemLeft" align="right" valign="top"><a id="ab03533e1ce2267c04a5e586af2d36e17"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_sequential_file.html#ab03533e1ce2267c04a5e586af2d36e17">getQueueLen</a> () const</td></tr>
<tr class="memdesc:ab03533e1ce2267c04a5e586af2d36e17"><td class="mdescLeft">&#160;</td><td class="mdescRight">Gets the length of the queue. <br /></td></tr>
<tr class="separator:ab03533e1ce2267c04a5e586af2d36e17"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a45c961f42143d5c99f8f69985311ce05"><td class="memItemLeft" align="right" valign="top"><a id="a45c961f42143d5c99f8f69985311ce05"></a>
&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_sequential_file.html#a45c961f42143d5c99f8f69985311ce05">SequentialFile</a> (const <a class="el" href="class_sequential_file.html">SequentialFile</a> &amp;)=delete</td></tr>
<tr class="memdesc:a45c961f42143d5c99f8f69985311ce05"><td class="mdescLeft">&#160;</td><td class="mdescRight">This class is not copyable. <br /></td></tr>
<tr class="separator:a45c961f42143d5c99f8f69985311ce05"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4f4e0ed7ea3ccda89a631edbfbbfb557"><td class="memItemLeft" align="right" valign="top"><a id="a4f4e0ed7ea3ccda89a631edbfbbfb557"></a>
<a class="el" href="class_sequential_file.html">SequentialFile</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_sequential_file.html#a4f4e0ed7ea3ccda89a631edbfbbfb557">operator=</a> (const <a class="el" href="class_sequential_file.html">SequentialFile</a> &amp;)=delete</td></tr>
<tr class="memdesc:a4f4e0ed7ea3ccda89a631edbfbbfb557"><td class="mdescLeft">&#160;</td><td class="mdescRight">This class is not copyable. <br /></td></tr>
<tr class="separator:a4f4e0ed7ea3ccda89a631edbfbbfb557"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-static-methods"></a>
Static Public Member Functions</h2></td></tr>
<tr class="memitem:a3bf9a01a2a8f35688fc2b3b324687d18"><td class="memItemLeft" align="right" valign="top">static bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_sequential_file.html#a3bf9a01a2a8f35688fc2b3b324687d18">createDirIfNecessary</a> (const char *path)</td></tr>
<tr class="memdesc:a3bf9a01a2a8f35688fc2b3b324687d18"><td class="mdescLeft">&#160;</td><td class="mdescRight">Creates the directory path if it does not exist.  <a href="class_sequential_file.html#a3bf9a01a2a8f35688fc2b3b324687d18">More...</a><br /></td></tr>
<tr class="separator:a3bf9a01a2a8f35688fc2b3b324687d18"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac8ffd08194daf6fb5a63b65043f71e24"><td class="memItemLeft" align="right" valign="top">static String&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_sequential_file.html#ac8ffd08194daf6fb5a63b65043f71e24">getNameWithOptionalExt</a> (const char *name, const char *ext)</td></tr>
<tr class="memdesc:ac8ffd08194daf6fb5a63b65043f71e24"><td class="mdescLeft">&#160;</td><td class="mdescRight">Combines name and ext into a filename with an optional filename extension.  <a href="class_sequential_file.html#ac8ffd08194daf6fb5a63b65043f71e24">More...</a><br /></td></tr>
<tr class="separator:ac8ffd08194daf6fb5a63b65043f71e24"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pro-methods"></a>
Protected Member Functions</h2></td></tr>
<tr class="memitem:a39f25cda2b82441866bf68039403b4ed"><td class="memItemLeft" align="right" valign="top">virtual bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_sequential_file.html#a39f25cda2b82441866bf68039403b4ed">preScanAddHook</a> (const char *name)</td></tr>
<tr class="memdesc:a39f25cda2b82441866bf68039403b4ed"><td class="mdescLeft">&#160;</td><td class="mdescRight">Allows a subclass to choose whether to queue a file or not during scanDir.  <a href="class_sequential_file.html#a39f25cda2b82441866bf68039403b4ed">More...</a><br /></td></tr>
<tr class="separator:a39f25cda2b82441866bf68039403b4ed"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af518d22648b36186aaba7b0543abbd06"><td class="memItemLeft" align="right" valign="top"><a id="af518d22648b36186aaba7b0543abbd06"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_sequential_file.html#af518d22648b36186aaba7b0543abbd06">queueMutexLock</a> () const</td></tr>
<tr class="memdesc:af518d22648b36186aaba7b0543abbd06"><td class="mdescLeft">&#160;</td><td class="mdescRight">Lock the mutex used to protect the queue. <br /></td></tr>
<tr class="separator:af518d22648b36186aaba7b0543abbd06"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a38f0cea966f676cd6d3ded7d5d0a479f"><td class="memItemLeft" align="right" valign="top"><a id="a38f0cea966f676cd6d3ded7d5d0a479f"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_sequential_file.html#a38f0cea966f676cd6d3ded7d5d0a479f">queueMutexUnlock</a> () const</td></tr>
<tr class="memdesc:a38f0cea966f676cd6d3ded7d5d0a479f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Unlock the mutex used to protect the queue. <br /></td></tr>
<tr class="separator:a38f0cea966f676cd6d3ded7d5d0a479f"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pro-attribs"></a>
Protected Attributes</h2></td></tr>
<tr class="memitem:aa3cd0dfa9f017575b7f3b6153be8a164"><td class="memItemLeft" align="right" valign="top"><a id="aa3cd0dfa9f017575b7f3b6153be8a164"></a>
String&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_sequential_file.html#aa3cd0dfa9f017575b7f3b6153be8a164">dirPath</a></td></tr>
<tr class="memdesc:aa3cd0dfa9f017575b7f3b6153be8a164"><td class="mdescLeft">&#160;</td><td class="mdescRight">The path to the queue directory. Must be configured, using the top level directory is not allowed. <br /></td></tr>
<tr class="separator:aa3cd0dfa9f017575b7f3b6153be8a164"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa293dc017d7717b5d5728e32317dc6d7"><td class="memItemLeft" align="right" valign="top"><a id="aa293dc017d7717b5d5728e32317dc6d7"></a>
String&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_sequential_file.html#aa293dc017d7717b5d5728e32317dc6d7">pattern</a> = &quot;%08d&quot;</td></tr>
<tr class="memdesc:aa293dc017d7717b5d5728e32317dc6d7"><td class="mdescLeft">&#160;</td><td class="mdescRight">Filename pattern, used with snprintf and sscanf to parse and generate filenames. <br /></td></tr>
<tr class="separator:aa293dc017d7717b5d5728e32317dc6d7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7a6a0523160e99513126c50653e967ec"><td class="memItemLeft" align="right" valign="top"><a id="a7a6a0523160e99513126c50653e967ec"></a>
String&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_sequential_file.html#a7a6a0523160e99513126c50653e967ec">filenameExtension</a> = &quot;&quot;</td></tr>
<tr class="memdesc:a7a6a0523160e99513126c50653e967ec"><td class="mdescLeft">&#160;</td><td class="mdescRight">Filename extension, without the dot. May be an empty string for no extension. <br /></td></tr>
<tr class="separator:a7a6a0523160e99513126c50653e967ec"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a144ba8187c2dae80e0fa5e5dd6b923b2"><td class="memItemLeft" align="right" valign="top"><a id="a144ba8187c2dae80e0fa5e5dd6b923b2"></a>
bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_sequential_file.html#a144ba8187c2dae80e0fa5e5dd6b923b2">scanDirCompleted</a> = false</td></tr>
<tr class="memdesc:a144ba8187c2dae80e0fa5e5dd6b923b2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set to true after <a class="el" href="class_sequential_file.html#a8ec4eba0b7b735b9f338e21003daec81" title="Scans the queue directory for files. Typically called during setup().">scanDir()</a> is called. <br /></td></tr>
<tr class="separator:a144ba8187c2dae80e0fa5e5dd6b923b2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4c8b4fb2dc60e96eac357a85c439232c"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_sequential_file.html#a4c8b4fb2dc60e96eac357a85c439232c">lastFileNum</a> = 0</td></tr>
<tr class="memdesc:a4c8b4fb2dc60e96eac357a85c439232c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Last file number used.  <a href="class_sequential_file.html#a4c8b4fb2dc60e96eac357a85c439232c">More...</a><br /></td></tr>
<tr class="separator:a4c8b4fb2dc60e96eac357a85c439232c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9a4ac2a83eb7aaabcc0cc05359c09243"><td class="memItemLeft" align="right" valign="top"><a id="a9a4ac2a83eb7aaabcc0cc05359c09243"></a>
os_mutex_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_sequential_file.html#a9a4ac2a83eb7aaabcc0cc05359c09243">queueMutex</a> = 0</td></tr>
<tr class="memdesc:a9a4ac2a83eb7aaabcc0cc05359c09243"><td class="mdescLeft">&#160;</td><td class="mdescRight">Mutex used to protect queue. <br /></td></tr>
<tr class="separator:a9a4ac2a83eb7aaabcc0cc05359c09243"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac92d314dd80cac272586eae6a84ac295"><td class="memItemLeft" align="right" valign="top">std::deque&lt; int &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_sequential_file.html#ac92d314dd80cac272586eae6a84ac295">queue</a></td></tr>
<tr class="memdesc:ac92d314dd80cac272586eae6a84ac295"><td class="mdescLeft">&#160;</td><td class="mdescRight">Queue of files.  <a href="class_sequential_file.html#ac92d314dd80cac272586eae6a84ac295">More...</a><br /></td></tr>
<tr class="separator:ac92d314dd80cac272586eae6a84ac295"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Class for maintaining a directory of files as a queue with unique filenames. </p>
<p>You select a directory on the Gen 3 flash file system for use as the queue directory. This directory is filled with numbered files, for example: 00000001.jpg. It's possible to store meta information in additional files. For example, 00000001.sha1 to hold a SHA-1 hash of the file. The file are numbered sequentially.</p>
<p>You typically instantiate this class as a global variable.</p>
<p>In global setup(), configure it using the withXXX() methods, then call the <a class="el" href="class_sequential_file.html#a8ec4eba0b7b735b9f338e21003daec81" title="Scans the queue directory for files. Typically called during setup().">scanDir()</a> method to read the queue from disk. In particular, you must use <a class="el" href="class_sequential_file.html#a78904483c9d5e57a108b950fc59e19b3" title="Sets the directory to use as the queue directory. This is required!">withDirPath()</a> to set the queue directory!</p>
<p>Files left on disk are added to the queue during <a class="el" href="class_sequential_file.html#a8ec4eba0b7b735b9f338e21003daec81" title="Scans the queue directory for files. Typically called during setup().">scanDir()</a> and an in-memory queue is initialized with the files to process.</p>
<p>Code can reserve a space in the queue using <a class="el" href="class_sequential_file.html#a3c08c208379127ef9913e4275c4dd032" title="Reserve a file number you will use to write data to.">reserveFile()</a>. This returns the next available file number but does not create the file.</p>
<p>Once you have fully written the file, call <a class="el" href="class_sequential_file.html#ad1f77c50657cd2364c85955ae6740313" title="Adds a previously reserved file to the queue.">addFileToQueue()</a>.</p>
<p>The code that processes files in the queue calls <a class="el" href="class_sequential_file.html#a5fb651889c0e74d6ec4a4afeb112658a" title="Gets a file from the queue.">getFileFromQueue()</a>. </p>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="aef58d2fa4a6ef7c2bdb369199ba63db2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aef58d2fa4a6ef7c2bdb369199ba63db2">&#9670;&nbsp;</a></span>SequentialFile()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">SequentialFile::SequentialFile </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Default constructor. </p>
<p>This object is often created as a global variable.</p>
<p>In global setup(), configure it using the withXXX() methods, then call the <a class="el" href="class_sequential_file.html#a8ec4eba0b7b735b9f338e21003daec81" title="Scans the queue directory for files. Typically called during setup().">scanDir()</a> method to read the queue from disk. </p>

</div>
</div>
<a id="a49b1e5ab96a07ee5ccdeadf90bad9606"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a49b1e5ab96a07ee5ccdeadf90bad9606">&#9670;&nbsp;</a></span>~SequentialFile()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">SequentialFile::~SequentialFile </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Destructor. </p>
<p>This object is often created as a global variables and never deleted. </p>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="ad1f77c50657cd2364c85955ae6740313"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad1f77c50657cd2364c85955ae6740313">&#9670;&nbsp;</a></span>addFileToQueue()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void SequentialFile::addFileToQueue </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>fileNum</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Adds a previously reserved file to the queue. </p>
<p>Use <a class="el" href="class_sequential_file.html#a3c08c208379127ef9913e4275c4dd032" title="Reserve a file number you will use to write data to.">reserveFile()</a> to get the next file number, <a class="el" href="class_sequential_file.html#ad1f77c50657cd2364c85955ae6740313" title="Adds a previously reserved file to the queue.">addFileToQueue()</a> to add it to the queue and <a class="el" href="class_sequential_file.html#a5fb651889c0e74d6ec4a4afeb112658a" title="Gets a file from the queue.">getFileFromQueue()</a> to get an item from the queue.</p>
<p>It's safe to call <a class="el" href="class_sequential_file.html#a3c08c208379127ef9913e4275c4dd032" title="Reserve a file number you will use to write data to.">reserveFile()</a>, <a class="el" href="class_sequential_file.html#ad1f77c50657cd2364c85955ae6740313" title="Adds a previously reserved file to the queue.">addFileToQueue()</a>, and <a class="el" href="class_sequential_file.html#a5fb651889c0e74d6ec4a4afeb112658a" title="Gets a file from the queue.">getFileFromQueue()</a> from different threads. Locking is handled internally. </p>

</div>
</div>
<a id="a3bf9a01a2a8f35688fc2b3b324687d18"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3bf9a01a2a8f35688fc2b3b324687d18">&#9670;&nbsp;</a></span>createDirIfNecessary()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool SequentialFile::createDirIfNecessary </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>path</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Creates the directory path if it does not exist. </p>
<p>Note: This only creates the last element of the path if it does not exist. If you use directories nested more than one level deep, you'll need to call this separately to create parent directories! </p>

</div>
</div>
<a id="a31d347554fe824ba04172b428291457c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a31d347554fe824ba04172b428291457c">&#9670;&nbsp;</a></span>getDirPath()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const char* SequentialFile::getDirPath </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Gets the directory path set using <a class="el" href="class_sequential_file.html#a78904483c9d5e57a108b950fc59e19b3" title="Sets the directory to use as the queue directory. This is required!">withDirPath()</a> </p>
<p>The returned path will not end with a slash. </p>

</div>
</div>
<a id="a5fb651889c0e74d6ec4a4afeb112658a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5fb651889c0e74d6ec4a4afeb112658a">&#9670;&nbsp;</a></span>getFileFromQueue()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int SequentialFile::getFileFromQueue </td>
          <td>(</td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>remove</em> = <code>true</code></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Gets a file from the queue. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">remove</td><td>(optional, default true). If true, removes the file from the queue in RAM. If false, calling <a class="el" href="class_sequential_file.html#a5fb651889c0e74d6ec4a4afeb112658a" title="Gets a file from the queue.">getFileFromQueue()</a> again will retrieve the same fileNum.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>0 if there are no items in the queue, or a fileNum for an item in the queue.</dd></dl>
<p>Use <a class="el" href="class_sequential_file.html#ad446fe7c6c783f8eb902e0b1aab580ee" title="Gets a full pathname based on dirName and getNameForFileNum.">getPathForFileNum()</a> to convert the number into a pathname for use with open().</p>
<p>The queue is stored in RAM, so if the device reboots before you delete the file it will reappear in the queue when scanDir is called. This method does not need to access the filesystem. You can call <a class="el" href="class_sequential_file.html#a5fb651889c0e74d6ec4a4afeb112658a" title="Gets a file from the queue.">getFileFromQueue()</a> on every loop if you want to to check if there are files to process without affecting performance.</p>
<p>It's safe to call <a class="el" href="class_sequential_file.html#a3c08c208379127ef9913e4275c4dd032" title="Reserve a file number you will use to write data to.">reserveFile()</a>, <a class="el" href="class_sequential_file.html#ad1f77c50657cd2364c85955ae6740313" title="Adds a previously reserved file to the queue.">addFileToQueue()</a>, and <a class="el" href="class_sequential_file.html#a5fb651889c0e74d6ec4a4afeb112658a" title="Gets a file from the queue.">getFileFromQueue()</a> from different threads. Locking is handled internally. </p>

</div>
</div>
<a id="a8f9d8ef1772bef6f2bf71dbf77669eec"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8f9d8ef1772bef6f2bf71dbf77669eec">&#9670;&nbsp;</a></span>getFilenameExtension()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const char* SequentialFile::getFilenameExtension </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Gets the filename extension. </p>
<p>Returned string does not contain the dot. For example, for JPEG files it might be "jpg". </p>

</div>
</div>
<a id="a16f4e1bf3ca26ba7551b8148c72e3f27"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a16f4e1bf3ca26ba7551b8148c72e3f27">&#9670;&nbsp;</a></span>getNameForFileNum()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">String SequentialFile::getNameForFileNum </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>fileNum</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>overrideExt</em> = <code>NULL</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Uses pattern to create a filename given a fileNum. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">fileNum</td><td>A file number, typically from <a class="el" href="class_sequential_file.html#a3c08c208379127ef9913e4275c4dd032" title="Reserve a file number you will use to write data to.">reserveFile()</a> or <a class="el" href="class_sequential_file.html#a5fb651889c0e74d6ec4a4afeb112658a" title="Gets a file from the queue.">getFileFromQueue()</a></td></tr>
    <tr><td class="paramname">overrideExt</td><td>If non-null, use this extension instead of the configured filename extension. It should not contain the preceeding dot.</td></tr>
  </table>
  </dd>
</dl>
<p>The overrideExt is used when you create multiple files per queue entry fileNum, for example a data file and a .sha1 hash for the file. Or other metadata. </p>

</div>
</div>
<a id="ac8ffd08194daf6fb5a63b65043f71e24"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac8ffd08194daf6fb5a63b65043f71e24">&#9670;&nbsp;</a></span>getNameWithOptionalExt()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">String SequentialFile::getNameWithOptionalExt </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>ext</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Combines name and ext into a filename with an optional filename extension. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">name</td><td>Filename (required)</td></tr>
    <tr><td class="paramname">ext</td><td>Filename extension (optional). If you pass is NULL or an empty string, the dot and extension are not appended.</td></tr>
  </table>
  </dd>
</dl>
<p>Only adds the . when ext is non-null and non-empty. </p>

</div>
</div>
<a id="ad446fe7c6c783f8eb902e0b1aab580ee"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad446fe7c6c783f8eb902e0b1aab580ee">&#9670;&nbsp;</a></span>getPathForFileNum()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">String SequentialFile::getPathForFileNum </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>fileNum</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>overrideExt</em> = <code>NULL</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Gets a full pathname based on dirName and getNameForFileNum. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">fileNum</td><td>A file number, typically from <a class="el" href="class_sequential_file.html#a3c08c208379127ef9913e4275c4dd032" title="Reserve a file number you will use to write data to.">reserveFile()</a> or <a class="el" href="class_sequential_file.html#a5fb651889c0e74d6ec4a4afeb112658a" title="Gets a file from the queue.">getFileFromQueue()</a></td></tr>
    <tr><td class="paramname">overrideExt</td><td>If non-null, use this extension instead of the configured filename extension.</td></tr>
  </table>
  </dd>
</dl>
<p>The overrideExt is used when you create multiple files per queue entry fileNum, for example a data file and a .sha1 hash for the file. Or other metadata. </p>

</div>
</div>
<a id="a39f25cda2b82441866bf68039403b4ed"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a39f25cda2b82441866bf68039403b4ed">&#9670;&nbsp;</a></span>preScanAddHook()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual bool SequentialFile::preScanAddHook </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>name</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">protected</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Allows a subclass to choose whether to queue a file or not during scanDir. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">name</td><td>A potential filename in the queue directory</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>true to add the file to the queue or false to not queue the file.</dd></dl>
<p>This would allow a subclass to do some validation of the file before adding it to the queue when reading the files from disk after reboot. </p>

</div>
</div>
<a id="a6628953887d8e3f20c485fe5b789c9d6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6628953887d8e3f20c485fe5b789c9d6">&#9670;&nbsp;</a></span>removeAll()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void SequentialFile::removeAll </td>
          <td>(</td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>removeDir</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Removes all of the files in the queue directory. </p>
<p>removeDir true to remove the queue directory itself, false to just remove the contents.</p>
<p>Note this is all files, not just the filenames with the matching extension. </p>

</div>
</div>
<a id="ab598f45bbd35dda3af14be5a5be7671a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab598f45bbd35dda3af14be5a5be7671a">&#9670;&nbsp;</a></span>removeFileNum()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void SequentialFile::removeFileNum </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>fileNum</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>allExtensions</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Remove fileNum from the flash file system. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">fileNum</td><td>A file number, typically from <a class="el" href="class_sequential_file.html#a3c08c208379127ef9913e4275c4dd032" title="Reserve a file number you will use to write data to.">reserveFile()</a> or <a class="el" href="class_sequential_file.html#a5fb651889c0e74d6ec4a4afeb112658a" title="Gets a file from the queue.">getFileFromQueue()</a></td></tr>
    <tr><td class="paramname">allExtensions</td><td>If true, all files with that number regardless of extension are removed. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a3c08c208379127ef9913e4275c4dd032"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3c08c208379127ef9913e4275c4dd032">&#9670;&nbsp;</a></span>reserveFile()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int SequentialFile::reserveFile </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Reserve a file number you will use to write data to. </p>
<p>Use <a class="el" href="class_sequential_file.html#ad446fe7c6c783f8eb902e0b1aab580ee" title="Gets a full pathname based on dirName and getNameForFileNum.">getPathForFileNum()</a> to get the pathname to the file. Reservations are in-RAM only so if the device reboots before you write the file, the reservation will be lost. </p>

</div>
</div>
<a id="a78904483c9d5e57a108b950fc59e19b3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a78904483c9d5e57a108b950fc59e19b3">&#9670;&nbsp;</a></span>withDirPath()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_sequential_file.html">SequentialFile</a> &amp; SequentialFile::withDirPath </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>dirPath</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Sets the directory to use as the queue directory. This is required! </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">dirPath</td><td>the pathname, Unix-style with / as the directory separator.</td></tr>
  </table>
  </dd>
</dl>
<p>Typically you create your queue either at the top level ("/myqueue") or in /usr ("/usr/myqueue"). The directory will be created if necessary, however only one level of directory will be created. The parent must already exist.</p>
<p>The dirPath can end with a slash or not, but if you include it, it will be removed.</p>
<p>You must call this as you cannot use the root directory as a queue! </p>

</div>
</div>
<a id="a73a5cf479e0fbd460362350289919d7a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a73a5cf479e0fbd460362350289919d7a">&#9670;&nbsp;</a></span>withFilenameExtension()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_sequential_file.html">SequentialFile</a>&amp; SequentialFile::withFilenameExtension </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>ext</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Filename extension for queue files. (Default: no extension) </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">ext</td><td>The filename extension (just the extension, no preceding dot)</td></tr>
  </table>
  </dd>
</dl>
<p>For example, for JPEG files it might be "jpg". </p>

</div>
</div>
<a id="a2d4901b560f696247adf9e482c4409f0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2d4901b560f696247adf9e482c4409f0">&#9670;&nbsp;</a></span>withPattern()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_sequential_file.html">SequentialFile</a>&amp; SequentialFile::withPattern </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>pattern</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Sets the filename pattern. Default is %08d (8-digit decimal number with leading zeros) </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">pattern</td><td>The sprintf/sscanf pattern to use</td></tr>
  </table>
  </dd>
</dl>
<p>This string is used when scanning the queue directory to find files. Do not include the filename extension in this pattern! </p>

</div>
</div>
<h2 class="groupheader">Field Documentation</h2>
<a id="a4c8b4fb2dc60e96eac357a85c439232c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4c8b4fb2dc60e96eac357a85c439232c">&#9670;&nbsp;</a></span>lastFileNum</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int SequentialFile::lastFileNum = 0</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Last file number used. </p>
<p>Set during <a class="el" href="class_sequential_file.html#a8ec4eba0b7b735b9f338e21003daec81" title="Scans the queue directory for files. Typically called during setup().">scanDir()</a> and incremented by <a class="el" href="class_sequential_file.html#a3c08c208379127ef9913e4275c4dd032" title="Reserve a file number you will use to write data to.">reserveFile()</a>. May be updated by <a class="el" href="class_sequential_file.html#ad1f77c50657cd2364c85955ae6740313" title="Adds a previously reserved file to the queue.">addFileToQueue()</a> if you didn't <a class="el" href="class_sequential_file.html#a3c08c208379127ef9913e4275c4dd032" title="Reserve a file number you will use to write data to.">reserveFile()</a> first. </p>

</div>
</div>
<a id="ac92d314dd80cac272586eae6a84ac295"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac92d314dd80cac272586eae6a84ac295">&#9670;&nbsp;</a></span>queue</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::deque&lt;int&gt; SequentialFile::queue</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Queue of files. </p>
<p>Items are added using <a class="el" href="class_sequential_file.html#a8ec4eba0b7b735b9f338e21003daec81" title="Scans the queue directory for files. Typically called during setup().">scanDir()</a> and <a class="el" href="class_sequential_file.html#ad1f77c50657cd2364c85955ae6740313" title="Adds a previously reserved file to the queue.">addFileToQueue()</a>. Removed using <a class="el" href="class_sequential_file.html#a5fb651889c0e74d6ec4a4afeb112658a" title="Gets a file from the queue.">getFileFromQueue()</a>. </p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>src/<a class="el" href="_sequential_file_r_k_8h_source.html">SequentialFileRK.h</a></li>
<li>src/SequentialFileRK.cpp</li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.17
</small></address>
</body>
</html>
